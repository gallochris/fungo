---
title: "Scraping Odds"
author: "Chris Gallo"
date: 2020-07-24
categories: ["R"]
slug: "scrape-odds"
type: "post"
tags: ["R Markdown", "Fungo Friday"]
---



<table>
<caption><span id="tab:unnamed-chunk-1">Table 1: </span>NBA Champ Odds</caption>
<thead>
<tr class="header">
<th align="left">Team</th>
<th align="left">FanDuel</th>
<th align="left">DraftKings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lakers</td>
<td align="left">-900</td>
<td align="left">-909</td>
</tr>
<tr class="even">
<td align="left">Heat</td>
<td align="left">+610</td>
<td align="left">+600</td>
</tr>
</tbody>
</table>
<hr />
<p>Web scraping sounds hard. I’m finding it’s not too difficult with tools like <a href="https://blog.rstudio.com/2014/11/24/rvest-easy-web-scraping-with-r/">rvest</a>.</p>
<p>This is a simple example pulling together markdown table of team’s odds to make the NBA Championship. It pulls from <a href="https://www.oddsboom.com/nba/futures/22-nba-championship/">OddsBoom</a> and selects the odds of a few sports books.</p>
<p>There isn’t any sorting, converting of the odds, and styling done.</p>
<p>Code is below . . .</p>
<pre><code>library(knitr)
library(rvest)

odds &lt;- read_html(&#39;https://www.oddsboom.com/nba/futures/22-nba-championship/&#39;)

team &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;competitor&#39;)]&quot;) %&gt;% 
  rvest::html_text()

pb &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;goto pb _pb odds-cell null  odds-above-average &#39;)]&quot;) %&gt;% 
  rvest::html_text()

dk &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;goto dk _dk odds-cell null&#39;)]&quot;) %&gt;% 
  rvest::html_text()


chart_df &lt;- data.frame(team, pb, dk)

kable(chart_df, col.names = c(&quot;Team&quot;,
                           &quot;PointsBet&quot;,
                           &quot;DraftKings&quot;
                           ), caption = &quot;NBA Champ Odds&quot;, format=&quot;markdown&quot;)
</code></pre>
