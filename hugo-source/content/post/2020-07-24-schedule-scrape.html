---
title: "Scraping Odds"
author: "Chris Gallo"
date: 2020-07-24
categories: ["R"]
slug: "scrape-odds"
type: "post"
tags: ["R Markdown", "Fungo Friday"]
published: false
---



<table>
<caption><span id="tab:unnamed-chunk-1">Table 1: </span>NBA Champ Odds</caption>
<thead>
<tr class="header">
<th align="left">Team</th>
<th align="left">Best365</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lakers</td>
<td align="left">+333</td>
</tr>
<tr class="even">
<td align="left">Clippers</td>
<td align="left">+450</td>
</tr>
<tr class="odd">
<td align="left">Bucks</td>
<td align="left">+600</td>
</tr>
<tr class="even">
<td align="left">Warriors</td>
<td align="left">+550</td>
</tr>
<tr class="odd">
<td align="left">Nets</td>
<td align="left">+900</td>
</tr>
<tr class="even">
<td align="left">Heat</td>
<td align="left">+1600</td>
</tr>
<tr class="odd">
<td align="left">Celtics</td>
<td align="left">+1300</td>
</tr>
<tr class="even">
<td align="left">Raptors</td>
<td align="left">+1800</td>
</tr>
<tr class="odd">
<td align="left">Nuggets</td>
<td align="left">+2200</td>
</tr>
<tr class="even">
<td align="left">Mavericks</td>
<td align="left">+2500</td>
</tr>
<tr class="odd">
<td align="left">Rockets</td>
<td align="left">+2200</td>
</tr>
<tr class="even">
<td align="left">76ers</td>
<td align="left">+2000</td>
</tr>
<tr class="odd">
<td align="left">Jazz</td>
<td align="left">+3300</td>
</tr>
<tr class="even">
<td align="left">Blazers</td>
<td align="left">+4500</td>
</tr>
<tr class="odd">
<td align="left">Pelicans</td>
<td align="left">+5000</td>
</tr>
<tr class="even">
<td align="left">Thunder</td>
<td align="left">+8000</td>
</tr>
<tr class="odd">
<td align="left">Pacers</td>
<td align="left">+10000</td>
</tr>
<tr class="even">
<td align="left">Suns</td>
<td align="left">+10000</td>
</tr>
<tr class="odd">
<td align="left">Hawks</td>
<td align="left">+10000</td>
</tr>
<tr class="even">
<td align="left">Bulls</td>
<td align="left">+25000</td>
</tr>
<tr class="odd">
<td align="left">Grizzlies</td>
<td align="left">+12500</td>
</tr>
<tr class="even">
<td align="left">Timberwolves</td>
<td align="left">+15000</td>
</tr>
<tr class="odd">
<td align="left">Magic</td>
<td align="left">+12500</td>
</tr>
<tr class="even">
<td align="left">Wizards</td>
<td align="left">+15000</td>
</tr>
<tr class="odd">
<td align="left">Kings</td>
<td align="left">+15000</td>
</tr>
<tr class="even">
<td align="left">Spurs</td>
<td align="left">+10000</td>
</tr>
<tr class="odd">
<td align="left">Hornets</td>
<td align="left">+20000</td>
</tr>
<tr class="even">
<td align="left">Cavaliers</td>
<td align="left">+25000</td>
</tr>
<tr class="odd">
<td align="left">Pistons</td>
<td align="left">+20000</td>
</tr>
<tr class="even">
<td align="left">Knicks</td>
<td align="left">+25000</td>
</tr>
</tbody>
</table>
<hr />
<p>Web scraping sounds hard. I’m finding it’s not too difficult with tools like <a href="https://blog.rstudio.com/2014/11/24/rvest-easy-web-scraping-with-r/">rvest</a>.</p>
<p>This is a simple example pulling together markdown table of team’s odds to make the NBA Championship. It pulls from <a href="https://www.oddsboom.com/nba/futures/22-nba-championship/">OddsBoom</a> and selects the odds from a sportsbook(s).</p>
<p>There isn’t any sorting, converting of the odds, and styling done.</p>
<p>Code is below . . .</p>
<pre><code>library(knitr)
library(rvest)

odds &lt;- read_html(&#39;https://www.oddsboom.com/nba/futures/22-nba-championship/&#39;)

team &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;competitor&#39;)]&quot;) %&gt;% 
  rvest::html_text()

pb &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;goto pb _pb odds-cell null  odds-above-average &#39;)]&quot;) %&gt;% 
  rvest::html_text()

dk &lt;- odds %&gt;% 
  rvest::html_nodes(&#39;table&#39;) %&gt;% 
  xml2::xml_find_all(&quot;//td[contains(@class, &#39;goto dk _dk odds-cell null&#39;)]&quot;) %&gt;% 
  rvest::html_text()


chart_df &lt;- data.frame(team, pb, dk)

kable(chart_df, col.names = c(&quot;Team&quot;,
                           &quot;PointsBet&quot;,
                           &quot;DraftKings&quot;
                           ), caption = &quot;NBA Champ Odds&quot;, format=&quot;markdown&quot;)
</code></pre>
